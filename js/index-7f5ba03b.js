import{C as o}from"./index-bd969640.js";import{n as a,M as r,a as c}from"./index-d27c8c03.js";import"./vendor-7fe3a1dd.js";const u={name:"About",components:{Comment:o,Markdown:r},data(){return{about:"",isLiked:"notLiked",likeTimes:0,loading:!0}},created(){localStorage.getItem("isLiked")==="undefined"?(localStorage.setItem("isLiked","notLiked"),this.isLiked="notLiked"):this.isLiked=localStorage.getItem("isLiked"),this.getAboutFn()},mounted(){localStorage.getItem("configLeancloud")==="yes"&&this.queryLikeFn()},methods:{async getAboutFn(){const e=await this.$store.dispatch("github/getAboutAction").catch(s=>{throw this.$message({content:"获取关于内容失败",type:"error"}),new Error(s)}).finally(()=>{this.loading=!1}),n=(e==null?void 0:e.body)||"",i=await new c().parse(n).catch(s=>{throw this.$message({content:"解析 markdown 失败",type:"error"}),new Error(s)});this.about=i==null?void 0:i.content,this.appendBusuanzi(i==null?void 0:i.content)},async queryLikeFn(){const e=await this.$store.dispatch("leancloud/queryLikeAction","getTimes").catch(n=>{throw this.$message({content:"获取点赞次数失败",type:"error"}),new Error(n)});e!=="undefined"&&(this.likeTimes=e)},async likeClick(){if(localStorage.getItem("configLeancloud")==="no"){this.$message({content:"博主还没有设置 Leancloud，点赞无效",type:"error"});return}if(this.isLiked==="isLiked"){this.$message({content:"您已经点过赞了哦~",type:"warning"});return}this.likeTimes=await this.$store.dispatch("leancloud/queryLikeAction").catch(e=>{throw this.$message({content:"点赞失败",type:"error"}),new Error(e)}),this.isLiked="isLiked",localStorage.setItem("isLiked","isLiked"),this.$message({content:"谢谢您的点赞~",type:"success"})},appendBusuanzi(e){if(!e)return;if(e.includes("busuanzi")){const t=document.querySelector('script[src*="busuanzi"]');t&&t.remove();const i=document.createElement("script");i.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",document.body.appendChild(i)}}}};var d=function(){var n=this,t=n._self._c;return t("div",{staticClass:"about-wrap"},[t("div",{staticClass:"about"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"about-content"},[t("Markdown",{attrs:{content:n.about}})],1)]),t("Comment")],1)},l=[],m=a(u,d,l,!1,null,"f79858ec",null,null);const g=m.exports;export{g as default};
